<div class="agreements-container">
    <h2>Agreements</h2>
    <div class="agreements-header">
        <p>Total Agreements: {{ totalAgreements }}</p>
        <p>Total Earnings: {{ totalEarnings | currency }}</p>
    </div>

    <div class="agreements-list">
        <ng-container
            *ngFor="let agreement of filteredAgreements; let i = index"
        >
            <mat-card
                *ngIf="
                    i >= pageIndex * pageSize && i < (pageIndex + 1) * pageSize
                "
            >
                <mat-card-title> {{ agreement.jobPosition }}</mat-card-title>

                <mat-card-subtitle>
                    <p>Professional Area: {{ agreement.professionalArea }}</p>
                    Employer:
                    <a [routerLink]="['/employers', agreement.employer._id]">
                        {{ agreement.employer.companyName }}</a
                    >
                    <br />
                    Applicant:
                    <a [routerLink]="['/applicants', agreement.applicant._id]">
                        {{
                            agreement.applicant.name +
                                ' ' +
                                agreement.applicant.surname
                        }}</a
                    >
                </mat-card-subtitle>
                <mat-card-content>
                    <p>Fees: {{ agreement.fees | currency }}</p>
                </mat-card-content>
                <mat-card-actions>
                    <!-- <button
                        mat-button
                        color="warn"
                        (click)="deleteAgreement(agreement._id)"
                    >
                        Delete
                    </button> -->
                    <button
                        mat-fab
                        extended
                        color="warn"
                        (click)="deleteAgreement(agreement._id)"
                    >
                        <mat-icon>delete</mat-icon>
                        Delete
                    </button>
                </mat-card-actions>
            </mat-card>
        </ng-container>
    </div>
    <mat-paginator
        [length]="filteredAgreements.length"
        [pageSize]="pageSize"
        [pageIndex]="pageIndex"
        (page)="changePage($event)"
        [pageSizeOptions]="[5, 10, 25, 50]"
    ></mat-paginator>
</div>
